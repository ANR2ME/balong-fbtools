# balong-fbtools
Утилиты для работы с flash модемов на платформе balong

Утилиты работают через fastboot-интерфейс. Для перевода модема в этот режим надо сделать 2 вещи:

1. В первом байте ячейки nvram 53521 младший бит установть в 1. Например так:

at^nvwrex=53521,0,64,3D E0 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 01 00 00 00 01 00 00 00 00 00 00 00

2. Перезагрузить модем в режим fastboot. Сделать это можно из linux-консоли модема командой:

ecall power_off_reboot_operation

После этого модем впадает в fastboot-режим. При этом образуется устройство с vid=12d1, pid для модемов E3372 равен 36dd.
При этом никакие логические устройства в этой конфигурацией usb не образуются. Можно работать прямо с сырым устройством
в режиме libusb (указав ключ -u в команде). Или подключить к этому устройству драйвер option, для чего дать от рута 
такую команду:

echo "12d1 <pid>" >/sys/bus/usb-serial/drivers/option1/new_id

Будет образовано устройство /dev/ttyUSBx, через который можно работать в режиме последовательного порта (ключ -p).
